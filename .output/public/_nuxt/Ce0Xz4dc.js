import{i as W,c as de,u as ce,b as me,_ as pe,d as ve}from"./CNiE35Tx.js";import{e as C,A as fe,y as ee,x as J,a4 as U,ae as te,l as v,m as z,o as l,w as k,B as q,h as t,P as M,D as T,a5 as he,a6 as be,L as ae,ak as xe,am as _e,Q as se,c as f,p as g,b as y,J as Q,q as h,F as E,s as re,T as I,d as L,t as S,U as oe,j as F,a as P,a1 as ge,r as ye,aK as ie,aL as ne,E as le,n as ue,_ as ze,O as we,az as Ve,k as ke,I as $e}from"./CByrxgib.js";import{_ as Pe}from"./DlAUqK2U.js";const A=100,[Ce,Se]=fe("ProgressRoot"),D=o=>typeof o=="number";function qe(o,a){return W(o)||D(o)&&!Number.isNaN(o)&&o<=a&&o>=0?o:(console.error(`Invalid prop \`value\` of value \`${o}\` supplied to \`ProgressRoot\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${A} if no \`max\` prop is set)
  - \`null\`  or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`),null)}function Be(o){return D(o)&&!Number.isNaN(o)&&o>0?o:(console.error(`Invalid prop \`max\` of value \`${o}\` supplied to \`ProgressRoot\`. Only numbers greater than 0 are valid max values. Defaulting to \`${A}\`.`),A)}const Te=C({__name:"ProgressRoot",props:{modelValue:{},max:{default:A},getValueLabel:{type:Function,default:(o,a)=>`${Math.round(o/a*A)}%`},asChild:{type:Boolean},as:{}},emits:["update:modelValue","update:max"],setup(o,{emit:a}){const e=o,p=a;ee();const i=J(e,"modelValue",p,{passive:e.modelValue===void 0}),n=J(e,"max",p,{passive:e.max===void 0});U(()=>i.value,async r=>{const x=qe(r,e.max);x!==r&&(await te(),i.value=x)},{immediate:!0}),U(()=>e.max,r=>{const x=Be(e.max);x!==r&&(n.value=x)},{immediate:!0});const b=v(()=>W(i.value)?"indeterminate":i.value===n.value?"complete":"loading");return Se({modelValue:i,max:n,progressState:b}),(r,x)=>(l(),z(t(M),{"as-child":r.asChild,as:r.as,"aria-valuemax":t(n),"aria-valuemin":0,"aria-valuenow":D(t(i))?t(i):void 0,"aria-valuetext":r.getValueLabel(t(i),t(n)),"aria-label":r.getValueLabel(t(i),t(n)),role:"progressbar","data-state":b.value,"data-value":t(i)??void 0,"data-max":t(n)},{default:k(()=>[q(r.$slots,"default",{modelValue:t(i)})]),_:3},8,["as-child","as","aria-valuemax","aria-valuenow","aria-valuetext","aria-label","data-state","data-value","data-max"]))}}),Ne=C({__name:"ProgressIndicator",props:{asChild:{type:Boolean},as:{}},setup(o){const a=o,e=Ce();return ee(),(p,i)=>{var n;return l(),z(t(M),T(a,{"data-state":t(e).progressState.value,"data-value":((n=t(e).modelValue)==null?void 0:n.value)??void 0,"data-max":t(e).max.value}),{default:k(()=>[q(p.$slots,"default")]),_:3},16,["data-state","data-value","data-max"])}}}),Ae=C({__name:"BaseSeparator",props:{orientation:{default:"horizontal"},decorative:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const a=o,e=["horizontal","vertical"];function p(r){return e.includes(r)}const i=v(()=>p(a.orientation)?a.orientation:"horizontal"),n=v(()=>i.value==="vertical"?a.orientation:void 0),b=v(()=>a.decorative?{role:"none"}:{"aria-orientation":n.value,role:"separator"});return(r,x)=>(l(),z(t(M),T({as:r.as,"as-child":r.asChild,"data-orientation":i.value},b.value),{default:k(()=>[q(r.$slots,"default")]),_:3},16,["as","as-child","data-orientation"]))}}),Ie=C({__name:"Separator",props:{orientation:{default:"horizontal"},decorative:{type:Boolean},asChild:{type:Boolean},as:{}},setup(o){const a=o;return(e,p)=>(l(),z(Ae,he(be(a)),{default:k(()=>[q(e.$slots,"default")]),_:3},16))}}),Le={slots:{root:"gap-2",base:"relative overflow-hidden rounded-full bg-(--ui-bg-accented)",indicator:"rounded-full size-full transition-transform duration-200 ease-out",status:"flex justify-end text-(--ui-text-dimmed) transition-[width] duration-200",steps:"grid items-end",step:"truncate text-end row-start-1 col-start-1 transition-opacity"},variants:{animation:{carousel:"","carousel-inverse":"",swing:"",elastic:""},color:{primary:{indicator:"bg-(--ui-primary)",steps:"text-(--ui-primary)"},secondary:{indicator:"bg-(--ui-secondary)",steps:"text-(--ui-secondary)"},success:{indicator:"bg-(--ui-success)",steps:"text-(--ui-success)"},info:{indicator:"bg-(--ui-info)",steps:"text-(--ui-info)"},warning:{indicator:"bg-(--ui-warning)",steps:"text-(--ui-warning)"},error:{indicator:"bg-(--ui-error)",steps:"text-(--ui-error)"},neutral:{indicator:"bg-(--ui-bg-inverted)",steps:"text-(--ui-bg)"}},size:{"2xs":{status:"text-xs",steps:"text-xs"},xs:{status:"text-xs",steps:"text-xs"},sm:{status:"text-sm",steps:"text-sm"},md:{status:"text-sm",steps:"text-sm"},lg:{status:"text-sm",steps:"text-sm"},xl:{status:"text-base",steps:"text-base"},"2xl":{status:"text-base",steps:"text-base"}},step:{active:{step:"opacity-100"},first:{step:"opacity-100 text-(--ui-text-muted)"},other:{step:"opacity-0"},last:{step:""}},orientation:{horizontal:{root:"w-full flex flex-col",base:"w-full",status:"flex-row"},vertical:{root:"h-full flex flex-row-reverse",base:"h-full",status:"flex-col"}},inverted:{true:{status:"self-end"}}},compoundVariants:[{inverted:!0,orientation:"horizontal",class:{step:"text-start",status:"flex-row-reverse"}},{inverted:!0,orientation:"vertical",class:{steps:"items-start",status:"flex-col-reverse"}},{orientation:"horizontal",size:"2xs",class:"h-px"},{orientation:"horizontal",size:"xs",class:"h-0.5"},{orientation:"horizontal",size:"sm",class:"h-1"},{orientation:"horizontal",size:"md",class:"h-2"},{orientation:"horizontal",size:"lg",class:"h-3"},{orientation:"horizontal",size:"xl",class:"h-4"},{orientation:"horizontal",size:"2xl",class:"h-5"},{orientation:"vertical",size:"2xs",class:"w-px"},{orientation:"vertical",size:"xs",class:"w-0.5"},{orientation:"vertical",size:"sm",class:"w-1"},{orientation:"vertical",size:"md",class:"w-2"},{orientation:"vertical",size:"lg",class:"w-3"},{orientation:"vertical",size:"xl",class:"w-4"},{orientation:"vertical",size:"2xl",class:"w-5"},{orientation:"horizontal",animation:"carousel",class:{indicator:"data-[state=indeterminate]:animate-[carousel_2s_ease-in-out_infinite] data-[state=indeterminate]:rtl:animate-[carousel-rtl_2s_ease-in-out_infinite]"}},{orientation:"vertical",animation:"carousel",class:{indicator:"data-[state=indeterminate]:animate-[carousel-vertical_2s_ease-in-out_infinite]"}},{orientation:"horizontal",animation:"carousel-inverse",class:{indicator:"data-[state=indeterminate]:animate-[carousel-inverse_2s_ease-in-out_infinite] data-[state=indeterminate]:rtl:animate-[carousel-inverse-rtl_2s_ease-in-out_infinite]"}},{orientation:"vertical",animation:"carousel-inverse",class:{indicator:"data-[state=indeterminate]:animate-[carousel-inverse-vertical_2s_ease-in-out_infinite]"}},{orientation:"horizontal",animation:"swing",class:{indicator:"data-[state=indeterminate]:animate-[swing_2s_ease-in-out_infinite]"}},{orientation:"vertical",animation:"swing",class:{indicator:"data-[state=indeterminate]:animate-[swing-vertical_2s_ease-in-out_infinite]"}},{orientation:"horizontal",animation:"elastic",class:{indicator:"data-[state=indeterminate]:animate-[elastic_2s_ease-in-out_infinite]"}},{orientation:"vertical",animation:"elastic",class:{indicator:"data-[state=indeterminate]:animate-[elastic-vertical_2s_ease-in-out_infinite]"}}],defaultVariants:{animation:"carousel",color:"primary",size:"md"}},Me=oe;var Z;const Re=I({extend:I(Le),...((Z=Me.ui)==null?void 0:Z.progress)||{}}),Ue=C({__name:"Progress",props:{as:{},max:{},status:{type:Boolean},inverted:{type:Boolean,default:!1},size:{},color:{},orientation:{default:"horizontal"},animation:{},class:{},ui:{},getValueLabel:{},modelValue:{default:null}},emits:["update:modelValue","update:max"],setup(o,{emit:a}){const e=o,p=a,i=ae(),{dir:n}=xe(),b=_e(se(e,"getValueLabel","modelValue"),p),r=v(()=>b.value.modelValue===null),x=v(()=>Array.isArray(e.max)),c=v(()=>{if(!(r.value||!e.max))return Array.isArray(e.max)?e.max.length-1:Number(e.max)}),u=v(()=>{if(!r.value)switch(!0){case b.value.modelValue<0:return 0;case b.value.modelValue>(c.value??100):return 100;default:return Math.round(b.value.modelValue/(c.value??100)*100)}}),s=v(()=>{if(u.value!==void 0)return e.orientation==="vertical"?{transform:`translateY(${e.inverted?"":"-"}${100-u.value}%)`}:n.value==="rtl"?{transform:`translateX(${e.inverted?"-":""}${100-u.value}%)`}:{transform:`translateX(${e.inverted?"":"-"}${100-u.value}%)`}}),$=v(()=>({[e.orientation==="vertical"?"height":"width"]:u.value?`${u.value}%`:"fit-content"}));function V(m){return m===Number(e.modelValue)}function w(m){return m===0}function _(m){return m===c.value}function d(m){return m=Number(m),V(m)&&!w(m)?"active":w(m)&&V(m)?"first":_(m)&&V(m)?"last":"other"}const B=v(()=>Re({animation:e.animation,size:e.size,color:e.color,orientation:e.orientation,inverted:e.inverted}));return(m,ot)=>{var O;return l(),z(t(M),{as:m.as,class:h(B.value.root({class:[e.class,(O=e.ui)==null?void 0:O.root]}))},{default:k(()=>{var H,j,K;return[!r.value&&(m.status||i.status)?(l(),f("div",{key:0,class:h(B.value.status({class:(H=e.ui)==null?void 0:H.status})),style:Q($.value)},[q(m.$slots,"status",{percent:u.value},()=>[L(S(u.value)+"% ",1)])],6)):g("",!0),y(t(Te),T(t(b),{max:c.value,class:B.value.base({class:(j=e.ui)==null?void 0:j.base}),style:{transform:"translateZ(0)"}}),{default:k(()=>{var N;return[y(t(Ne),{class:h(B.value.indicator({class:(N=e.ui)==null?void 0:N.indicator})),style:Q(s.value)},null,8,["class","style"])]}),_:1},16,["max","class"]),x.value?(l(),f("div",{key:1,class:h(B.value.steps({class:(K=e.ui)==null?void 0:K.steps}))},[(l(!0),f(E,null,re(m.max,(N,R)=>{var X;return l(),f("div",{key:R,class:h(B.value.step({class:(X=e.ui)==null?void 0:X.step,step:d(R)}))},[q(m.$slots,`step-${R}`,{step:N},()=>[L(S(N),1)])],2)}),128))],2)):g("",!0)]}),_:3},8,["as","class"])}}}),Ee={key:0,class:"m-1 flex flex-row items-center gap-2 text-sm"},Fe=C({__name:"Input",props:{label:{},field:{},inputType:{}},setup(o){const{pagePlan:a}=F();return(e,p)=>{const i=de;return t(a)?(l(),f("div",Ee,[P("span",null,S(e.label),1),y(i,T({plan:t(a)},e.$attrs,{field:e.field,"input-type":e.inputType,class:"ml-auto rounded-md border border-gray-200 p-1 text-right text-sm dark:border-gray-800"}),null,16,["plan","field","input-type"])])):g("",!0)}}}),De={class:"relative"},Oe={class:"flex w-full flex-row"},He=["disabled"],je={key:1,class:"flex flex-row items-center gap-2 text-3xl font-bold"},Ke={class:"mb-1 flex w-full flex-row items-center"},Xe=C({__name:"index",setup(o){const a=ge(),{pagePlan:e,updatePlan:p}=F(),{finishedChildren:i,unfinishedChildren:n}=ce(),b=["overview","tasks","tracking","budget","expenses"],r=ye(null);return U(()=>a.params,async()=>{await te(),r.value&&(r.value.style.height="",r.value.style.height=`${r.value.scrollHeight}px`)}),(x,c)=>{var w;const u=me,s=ue,$=ze,V=pe;return l(),f("div",De,[P("div",Oe,[y(u,{plan:t(e),class:"text-4xl bg-slate-400"},null,8,["plan"]),t(e)?ie((l(),f("textarea",{key:0,ref_key:"titleArea",ref:r,"onUpdate:modelValue":c[0]||(c[0]=_=>t(e).title=_),disabled:t(e).archived,name:"title",class:h(["mr-auto h-auto w-full overflow-hidden text-3xl font-bold",{"italic text-slate-400":t(e).archived,"text-slate-900 dark:text-slate-100":!t(e).archived}]),rows:"1",oninput:"this.style.height = ''; this.style.height = this.scrollHeight + 'px'",onChange:c[1]||(c[1]=_=>t(p)({uuid:t(e).uuid,title:_.target.value})),onKeydown:c[2]||(c[2]=le(_=>_.target.blur(),["enter"]))},null,42,He)),[[ne,t(e).title]]):(l(),f("h1",je,[y(s,{name:"i-heroicons-home"}),c[3]||(c[3]=L(" Home "))])),t(e)&&(t(e).done||t(i)(t(e).uuid)&&!t(n)(t(e).uuid))?(l(),f("div",{key:2,class:h(["flex size-10 min-w-10 items-center justify-center rounded-full",{"bg-green-500":t(e).done,"bg-gray-300":!t(e).done}])},[y(s,{name:"i-heroicons-check-20-solid",class:"size-8 bg-white"})],2)):g("",!0)]),P("div",Ke,[(w=t(e))!=null&&w.archived?(l(),z(s,{key:0,name:"i-heroicons-archive-box",class:"mr-2 size-5 text-slate-400"})):g("",!0),(l(),f(E,null,re(b,_=>{var d;return y($,{key:_,class:h(["-mb-1 ml-1 rounded-t-md border-b-0 border-gray-200 p-1 px-2 dark:border-gray-800 dark:bg-gray-900",_===t(a).params.tab||_===b[0]&&!t(a).params.tab?"z-20 border-2 bg-white":"z-0 border bg-gray-200 dark:bg-gray-900"]),to:{name:"projects-id-tab",params:{id:((d=t(e))==null?void 0:d.id)||null,tab:_}}},{default:k(()=>[L(S(_),1)]),_:2},1032,["class","to"])}),64))]),y(V,{class:"relative z-10"},{default:k(()=>[q(x.$slots,"default",{},void 0,!0)]),_:3})])}}}),Je=Pe(Xe,[["__scopeId","data-v-a0e33b95"]]),Qe={slots:{root:"flex items-center align-center text-center",border:"",container:"font-medium text-(--ui-text) flex",icon:"shrink-0 size-5",avatar:"shrink-0",avatarSize:"2xs",label:"text-sm"},variants:{color:{primary:{border:"border-(--ui-primary)"},secondary:{border:"border-(--ui-secondary)"},success:{border:"border-(--ui-success)"},info:{border:"border-(--ui-info)"},warning:{border:"border-(--ui-warning)"},error:{border:"border-(--ui-error)"},neutral:{border:"border-(--ui-border)"}},orientation:{horizontal:{root:"w-full flex-row",border:"w-full",container:"mx-3 whitespace-nowrap"},vertical:{root:"h-full flex-col",border:"h-full",container:"my-2"}},size:{xs:"",sm:"",md:"",lg:"",xl:""},type:{solid:{border:"border-solid"},dashed:{border:"border-dashed"},dotted:{border:"border-dotted"}}},compoundVariants:[{orientation:"horizontal",size:"xs",class:{border:"border-t"}},{orientation:"horizontal",size:"sm",class:{border:"border-t-[2px]"}},{orientation:"horizontal",size:"md",class:{border:"border-t-[3px]"}},{orientation:"horizontal",size:"lg",class:{border:"border-t-[4px]"}},{orientation:"horizontal",size:"xl",class:{border:"border-t-[5px]"}},{orientation:"vertical",size:"xs",class:{border:"border-s"}},{orientation:"vertical",size:"sm",class:{border:"border-s-[2px]"}},{orientation:"vertical",size:"md",class:{border:"border-s-[3px]"}},{orientation:"vertical",size:"lg",class:{border:"border-s-[4px]"}},{orientation:"vertical",size:"xl",class:{border:"border-s-[5px]"}}],defaultVariants:{color:"neutral",size:"xs",type:"solid"}},Ye=oe;var G;const Ze=I({extend:I(Qe),...((G=Ye.ui)==null?void 0:G.separator)||{}}),Y=C({__name:"Separator",props:{as:{},label:{},icon:{},avatar:{},color:{},size:{},type:{},orientation:{default:"horizontal"},class:{},ui:{},decorative:{type:Boolean}},setup(o){const a=o,e=ae(),p=we(se(a,"as","decorative","orientation")),i=v(()=>Ze({color:a.color,orientation:a.orientation,size:a.size,type:a.type}));return(n,b)=>{var r;return l(),z(t(Ie),T(t(p),{class:i.value.root({class:[a.class,(r=a.ui)==null?void 0:r.root]})}),{default:k(()=>{var x,c,u;return[P("div",{class:h(i.value.border({class:(x=a.ui)==null?void 0:x.border}))},null,2),n.label||n.icon||n.avatar||e.default?(l(),f(E,{key:0},[P("div",{class:h(i.value.container({class:(c=a.ui)==null?void 0:c.container}))},[q(n.$slots,"default",{},()=>{var s,$,V,w;return[n.label?(l(),f("span",{key:0,class:h(i.value.label({class:(s=a.ui)==null?void 0:s.label}))},S(n.label),3)):n.icon?(l(),z(ue,{key:1,name:n.icon,class:h(i.value.icon({class:($=a.ui)==null?void 0:$.icon}))},null,8,["name","class"])):n.avatar?(l(),z(Ve,T({key:2,size:((V=a.ui)==null?void 0:V.avatarSize)||i.value.avatarSize()},n.avatar,{class:i.value.avatar({class:(w=a.ui)==null?void 0:w.avatar})}),null,16,["size","class"])):g("",!0)]})],2),P("div",{class:h(i.value.border({class:(u=a.ui)==null?void 0:u.border}))},null,2)],64)):g("",!0)]}),_:3},16,["class"])}}}),Ge=["disabled"],We={key:1,class:"flex flex-row mb-1"},et={key:3,class:"m-1 flex w-full text-sm"},tt={class:"ml-auto mr-2 p-1"},at={key:0},st={key:1},rt={class:"ml-auto mr-2 p-1"},ut=C({__name:"Overview",setup(o){const a=ke("plans",{verbose:!0,autoFetch:!0}),{pagePlan:e,updatePlan:p}=F(),i=v(()=>a.data.value.filter(u=>{var s;return u.parent===(((s=e.value)==null?void 0:s.uuid)||null)&&!u.done&&!u.archived})),n=v(()=>a.data.value.filter(u=>{var s;return u.parent===(((s=e.value)==null?void 0:s.uuid)||null)&&!u.archived})),b=v(()=>a.data.value.filter(u=>{var s;return u.parent===(((s=e.value)==null?void 0:s.uuid)||null)&&!u.archived}).length),r=v(()=>n.value.reduce((u,s)=>u+(s.manhours_required||0),0)),x=v(()=>r.value-i.value.reduce((u,s)=>u+(s.manhours_required||0),0)),c=v(()=>x.value/(r.value||1)*100);return(u,s)=>{const $=ve,V=Ue,w=Fe,_=Je;return l(),z(_,{tab:"overview"},{default:k(()=>[t(e)?ie((l(),f("textarea",{key:0,ref:"dodArea","onUpdate:modelValue":s[0]||(s[0]=d=>t(e).definition_of_done=d),disabled:t(e).archived,name:"dod",class:h(["h-auto w-full overflow-hidden rounded-md border p-1",{"italic text-slate-400":t(e).archived,"text-slate-900 dark:text-slate-100":!t(e).archived}]),placeholder:"Criteria to meet before marking this as ‘done’.",rows:"3",oninput:"this.style.height = ''; this.style.height = this.scrollHeight + 'px'",onChange:s[1]||(s[1]=d=>t(p)({uuid:t(e).uuid,definition_of_done:d.target.value})),onKeydown:s[2]||(s[2]=le(d=>d.target.blur(),["enter"]))},null,42,Ge)),[[ne,t(e).definition_of_done]]):g("",!0),t(e)?(l(),f("div",We,[y($,{modelValue:t(e).done,"onUpdate:modelValue":[s[3]||(s[3]=d=>t(e).done=d),s[4]||(s[4]=d=>typeof d=="boolean"&&t(p)({uuid:t(e).uuid,done:d}))],label:"Done",class:"ml-auto rounded border border-gray-200 px-1 dark:border-gray-800"},null,8,["modelValue"]),y($,{modelValue:t(e).archived,"onUpdate:modelValue":[s[5]||(s[5]=d=>t(e).archived=d),s[6]||(s[6]=d=>typeof d=="boolean"&&t(p)({uuid:t(e).uuid,archived:d}))],label:"Archived",class:"ml-1 rounded border border-gray-200 px-1 dark:border-gray-800"},null,8,["modelValue"])])):g("",!0),y(t(Y)),y(V,{modelValue:t(c),"onUpdate:modelValue":s[7]||(s[7]=d=>$e(c)?c.value=d:null),indicator:""},null,8,["modelValue"]),t(e)!==null?(l(),z(w,{key:2,label:t(b)?"Total projected manhours":"Hours estimated for task",class:h({"text-red-500":t(e).manhours_required!==null&&t(e).manhours_required<t(r),"italic text-slate-400":t(e).archived}),field:"manhours_required",placeholder:t(r),"input-type":"number",disabled:t(e).archived},null,8,["label","class","placeholder","disabled"])):g("",!0),t(n).length?(l(),f("div",et,[s[8]||(s[8]=P("span",null,"Calculated time required for subtasks: ",-1)),P("span",tt,S(t(r))+"h ",1)])):g("",!0),t(e)&&t(n).length&&t(e).manhours_required!==null?(l(),f("div",{key:4,class:h(["m-1 flex w-full text-sm",{"text-red-500":t(e).manhours_required!==null&&t(e).manhours_required<t(r)}])},[t(e).manhours_required!==null&&t(e).manhours_required<t(r)?(l(),f("span",at,"Overtime:")):(l(),f("span",st,"Margin:")),P("span",rt,S(Math.abs((t(e).manhours_required??0)-t(r)))+"h / "+S(Math.abs(t(e).manhours_required?(t(e).manhours_required-t(r))/t(e).manhours_required*100:0).toFixed())+"% ",1)],2)):g("",!0),y(t(Y)),t(e)?(l(),z(w,{key:5,label:"Budget:",field:"budget","input-type":"number",class:h({"italic text-slate-400":t(e).archived}),disabled:t(e).archived},null,8,["class","disabled"])):g("",!0)]),_:1})}}});export{ut as _,Je as a};
