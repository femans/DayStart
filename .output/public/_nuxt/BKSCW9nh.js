import{e as I,v as Te,x as ze,y as be,z as Le,l as D,A as Ne,m as w,o as m,w as _,B as Q,p as S,h as t,C as Re,D as ye,E as Me,G as ge,P as ee,i as qe,k as te,j as F,r as j,c as P,b,H as Fe,I as Ke,g as ke,d as T,a as E,t as R,F as q,s as _e,J as W,K as de,L as He,M as Ge,N as We,O as Qe,Q as Ye,R as Je,S as we,q as C,n as H,T as ce,U as Xe,V as J,W as ae,X as xe,Y as Ze,Z as et,$ as ne,a0 as $e,_ as Ce,a1 as Se,a2 as tt}from"./CByrxgib.js";import{_ as at}from"./Ce0Xz4dc.js";import{a as oe,e as nt,u as Pe,b as ot,c as lt,d as st,_ as Ie}from"./CNiE35Tx.js";import{U as De,l as rt,i as it,u as ut}from"./B-VcqM6e.js";import"./DlAUqK2U.js";const[dt,ct]=Ne("SwitchRoot"),pt=I({__name:"SwitchRoot",props:{defaultValue:{type:Boolean},modelValue:{type:[Boolean,null],default:void 0},disabled:{type:Boolean},id:{},value:{default:"on"},asChild:{type:Boolean},as:{default:"button"},name:{},required:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:o}){const a=e,l=o,{disabled:n}=Te(a),r=ze(a,"modelValue",l,{defaultValue:a.defaultValue,passive:a.modelValue===void 0});function i(){n.value||(r.value=!r.value)}const{forwardRef:d,currentElement:c}=be(),u=Le(c),f=D(()=>{var h;return a.id&&c.value?(h=document.querySelector(`[for="${a.id}"]`))==null?void 0:h.innerText:void 0});return ct({modelValue:r,toggleCheck:i,disabled:n}),(h,v)=>(m(),w(t(ee),ye(h.$attrs,{id:h.id,ref:t(d),role:"switch",type:h.as==="button"?"button":void 0,value:h.value,"aria-label":h.$attrs["aria-label"]||f.value,"aria-checked":t(r),"aria-required":h.required,"data-state":t(r)?"checked":"unchecked","data-disabled":t(n)?"":void 0,"as-child":h.asChild,as:h.as,disabled:t(n),onClick:i,onKeydown:Me(ge(i,["prevent"]),["enter"])}),{default:_(()=>[Q(h.$slots,"default",{modelValue:t(r)}),t(u)&&h.name?(m(),w(t(Re),{key:0,type:"checkbox",name:h.name,disabled:t(n),required:h.required,value:h.value,checked:!!t(r)},null,8,["name","disabled","required","value","checked"])):S("",!0)]),_:3},16,["id","type","value","aria-label","aria-checked","aria-required","data-state","data-disabled","as-child","as","disabled","onKeydown"]))}}),ht=I({__name:"SwitchThumb",props:{asChild:{type:Boolean},as:{default:"span"}},setup(e){const o=dt();return be(),(a,l)=>{var n;return m(),w(t(ee),{"data-state":(n=t(o).modelValue)!=null&&n.value?"checked":"unchecked","data-disabled":t(o).disabled.value?"":void 0,"as-child":a.asChild,as:a.as},{default:_(()=>[Q(a.$slots,"default")]),_:3},8,["data-state","data-disabled","as-child","as"])}}}),ft=I({__name:"NewInputBox",setup(e){const o=qe(),a=te("plans",{verbose:!0,autoFetch:!0}),{calculateNewItemPriority:l,pagePlan:n}=F(),r=j(!1),i=j(""),d=D(()=>a.data.value.filter(u=>{var f;return u.parent===(((f=n.value)==null?void 0:f.uuid)||null)}).filter(u=>!u.archived).toSorted((u,f)=>(u.priority??0)-(f.priority??0)));async function c(){var u;o.value&&i.value&&(r.value=!0,a.create({title:i.value,assignee_id:o.value.id,parent:((u=n.value)==null?void 0:u.uuid)||null,priority:l(d.value)}).then(()=>i.value="",f=>console.error("Error adding plan:",f)).finally(()=>r.value=!1))}return(u,f)=>{var x;const h=Fe,v=ke,y=oe;return(x=t(n))!=null&&x.archived?S("",!0):(m(),P("form",{key:0,class:"my-2 flex w-full gap-2",onSubmit:ge(c,["prevent"])},[b(h,{modelValue:t(i),"onUpdate:modelValue":f[0]||(f[0]=s=>Ke(i)?i.value=s:null),loading:t(r),class:"w-full dark:border-green-400",size:"xl",variant:"outline",type:"text",name:"newPlan",placeholder:"Type something here to make a new task/subproject.",autofocus:"",autocomplete:"off"},null,8,["modelValue","loading"]),b(y,{text:"Add new task/subproject",col:"",shortcuts:["â¤¶"],popper:{arrow:!0}},{default:_(()=>[b(v,{type:"submit",variant:"outline"},{default:_(()=>f[1]||(f[1]=[T(" Add ")])),_:1})]),_:1})],32))}}}),mt={class:"flex w-full select-none flex-row border-b dark:border-black"},vt={class:"mr-auto flex items-center"},bt=I({__name:"Header",props:{columns:{}},setup(e){const o=te("plans",{verbose:!0,autoFetch:!0}),{pagePlan:a}=F();return(l,n)=>(m(),P("div",mt,[E("div",vt," Subprojects: "+R(t(o).data.value.filter(r=>{var i;return r.parent===(((i=t(a))==null?void 0:i.uuid)||null)&&!r.archived&&t(o).data.value.some(d=>d.parent===r.uuid&&!d.archived)}).length)+"; Tasks: "+R(t(o).data.value.filter(r=>{var i;return r.parent===(((i=t(a))==null?void 0:i.uuid)||null)&&!r.archived&&!t(o).data.value.some(d=>d.parent===r.uuid&&!d.archived)}).length),1),(m(!0),P(q,null,_e(l.columns,(r,i)=>(m(),P("div",{key:i,style:W({width:`${r.width}px`}),class:"flex border-l justify-center p-1 text-xs"},R(r.title),5))),128))]))}}),yt={slots:{root:"relative flex items-start",base:["inline-flex items-center shrink-0 rounded-full border-2 border-transparent focus-visible:outline-2 focus-visible:outline-offset-2 data-[state=unchecked]:bg-(--ui-bg-accented)","transition-colors duration-200"],container:"flex items-center",thumb:"group pointer-events-none rounded-full bg-(--ui-bg) shadow-lg ring-0 transition-transform duration-200 data-[state=unchecked]:translate-x-0 data-[state=unchecked]:rtl:-translate-x-0 flex items-center justify-center",icon:["absolute shrink-0 group-data-[state=unchecked]:text-(--ui-text-dimmed) opacity-0 size-10/12","transition-[color,opacity] duration-200"],wrapper:"ms-2",label:"block font-medium text-(--ui-text)",description:"text-(--ui-text-muted)"},variants:{color:{primary:{base:"data-[state=checked]:bg-(--ui-primary) focus-visible:outline-(--ui-primary)",icon:"group-data-[state=checked]:text-(--ui-primary)"},secondary:{base:"data-[state=checked]:bg-(--ui-secondary) focus-visible:outline-(--ui-secondary)",icon:"group-data-[state=checked]:text-(--ui-secondary)"},success:{base:"data-[state=checked]:bg-(--ui-success) focus-visible:outline-(--ui-success)",icon:"group-data-[state=checked]:text-(--ui-success)"},info:{base:"data-[state=checked]:bg-(--ui-info) focus-visible:outline-(--ui-info)",icon:"group-data-[state=checked]:text-(--ui-info)"},warning:{base:"data-[state=checked]:bg-(--ui-warning) focus-visible:outline-(--ui-warning)",icon:"group-data-[state=checked]:text-(--ui-warning)"},error:{base:"data-[state=checked]:bg-(--ui-error) focus-visible:outline-(--ui-error)",icon:"group-data-[state=checked]:text-(--ui-error)"},neutral:{base:"data-[state=checked]:bg-(--ui-bg-inverted) focus-visible:outline-(--ui-border-inverted)",icon:"group-data-[state=checked]:text-(--ui-text-highlighted)"}},size:{xs:{base:"w-7",container:"h-4",thumb:"size-3 data-[state=checked]:translate-x-3 data-[state=checked]:rtl:-translate-x-3",wrapper:"text-xs"},sm:{base:"w-8",container:"h-4",thumb:"size-3.5 data-[state=checked]:translate-x-3.5 data-[state=checked]:rtl:-translate-x-3.5",wrapper:"text-xs"},md:{base:"w-9",container:"h-5",thumb:"size-4 data-[state=checked]:translate-x-4 data-[state=checked]:rtl:-translate-x-4",wrapper:"text-sm"},lg:{base:"w-10",container:"h-5",thumb:"size-4.5 data-[state=checked]:translate-x-4.5 data-[state=checked]:rtl:-translate-x-4.5",wrapper:"text-sm"},xl:{base:"w-11",container:"h-6",thumb:"size-5 data-[state=checked]:translate-x-5 data-[state=checked]:rtl:-translate-x-5",wrapper:"text-base"}},checked:{true:{icon:"group-data-[state=checked]:opacity-100"}},unchecked:{true:{icon:"group-data-[state=unchecked]:opacity-100"}},loading:{true:{icon:"animate-spin"}},required:{true:{label:"after:content-['*'] after:ms-0.5 after:text-(--ui-error)"}},disabled:{true:{base:"cursor-not-allowed opacity-75",label:"cursor-not-allowed opacity-75",description:"cursor-not-allowed opacity-75"}}},defaultVariants:{color:"primary",size:"md"}},gt=Xe;var ve;const kt=ce({extend:ce(yt),...((ve=gt.ui)==null?void 0:ve.switch)||{}}),Ve=I({inheritAttrs:!1,__name:"Switch",props:de({as:{},color:{},size:{},loading:{type:Boolean},loadingIcon:{},checkedIcon:{},uncheckedIcon:{},label:{},description:{},class:{},ui:{},disabled:{type:Boolean},id:{},name:{},required:{type:Boolean},value:{},defaultValue:{type:Boolean}},{modelValue:{type:Boolean,default:void 0},modelModifiers:{}}),emits:de(["change"],["update:modelValue"]),setup(e,{emit:o}){const a=e,l=He(),n=o,r=Ge(e,"modelValue"),i=We(),d=Qe(Ye(a,"required","value","defaultValue")),{id:c,emitFormChange:u,emitFormInput:f,size:h,color:v,name:y,disabled:x,ariaAttrs:s}=Je(a),$=c.value??we(),k=D(()=>kt({size:h.value,color:v.value,required:a.required,loading:a.loading,disabled:x.value||a.loading}));function B(g){const U=new Event("change",{target:{value:g}});n("change",U),u(),f()}return(g,U)=>{var L;return m(),w(t(ee),{as:g.as,class:C(k.value.root({class:[a.class,(L=a.ui)==null?void 0:L.root]}))},{default:_(()=>{var O,A,M,p,N;return[E("div",{class:C(k.value.container({class:(O=a.ui)==null?void 0:O.container}))},[b(t(pt),ye({id:t($)},{...t(d),...g.$attrs,...t(s)},{modelValue:r.value,"onUpdate:modelValue":[U[0]||(U[0]=V=>r.value=V),B],name:t(y),disabled:t(x)||g.loading,class:k.value.base({class:(A=a.ui)==null?void 0:A.base})}),{default:_(()=>{var V;return[b(t(ht),{class:C(k.value.thumb({class:(V=a.ui)==null?void 0:V.thumb}))},{default:_(()=>{var re,ie,ue;return[g.loading?(m(),w(H,{key:0,name:g.loadingIcon||t(i).ui.icons.loading,class:C(k.value.icon({class:(re=a.ui)==null?void 0:re.icon,checked:!0,unchecked:!0}))},null,8,["name","class"])):(m(),P(q,{key:1},[g.checkedIcon?(m(),w(H,{key:0,name:g.checkedIcon,class:C(k.value.icon({class:(ie=a.ui)==null?void 0:ie.icon,checked:!0}))},null,8,["name","class"])):S("",!0),g.uncheckedIcon?(m(),w(H,{key:1,name:g.uncheckedIcon,class:C(k.value.icon({class:(ue=a.ui)==null?void 0:ue.icon,unchecked:!0}))},null,8,["name","class"])):S("",!0)],64))]}),_:1},8,["class"])]}),_:1},16,["id","modelValue","name","disabled","class"])],2),g.label||l.label||g.description||l.description?(m(),P("div",{key:0,class:C(k.value.wrapper({class:(M=a.ui)==null?void 0:M.wrapper}))},[g.label||l.label?(m(),w(t(nt),{key:0,for:t($),class:C(k.value.label({class:(p=a.ui)==null?void 0:p.label}))},{default:_(()=>[Q(g.$slots,"label",{label:g.label},()=>[T(R(g.label),1)])]),_:3},8,["for","class"])):S("",!0),g.description||l.description?(m(),P("p",{key:1,class:C(k.value.description({class:(N=a.ui)==null?void 0:N.description}))},[Q(g.$slots,"description",{description:g.description},()=>[T(R(g.description),1)])],2)):S("",!0)],2)):S("",!0)]}),_:3},8,["as","class"])}}});var pe;let _t=Symbol("headlessui.useid"),wt=0;const he=(pe=we)!=null?pe:function(){return J(_t,()=>`${++wt}`)()};function z(e){var o;if(e==null||e.value==null)return null;let a=(o=e.value.$el)!=null?o:e.value;return a instanceof Node?a:null}function Y(e,o,...a){if(e in o){let n=o[e];return typeof n=="function"?n(...a):n}let l=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(o).map(n=>`"${n}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,Y),l}function fe(e,o){if(e)return e;let a=o??"button";if(typeof a=="string"&&a.toLowerCase()==="button")return"button"}function xt(e,o){let a=j(fe(e.value.type,e.value.as));return ae(()=>{a.value=fe(e.value.type,e.value.as)}),xe(()=>{var l;a.value||z(o)&&z(o)instanceof HTMLButtonElement&&!((l=z(o))!=null&&l.hasAttribute("type"))&&(a.value="button")}),a}var Z=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Z||{}),$t=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))($t||{});function le({visible:e=!0,features:o=0,ourProps:a,theirProps:l,...n}){var r;let i=Ae(l,a),d=Object.assign(n,{props:i});if(e||o&2&&i.static)return X(d);if(o&1){let c=(r=i.unmount)==null||r?0:1;return Y(c,{0(){return null},1(){return X({...n,props:{...i,hidden:!0,style:{display:"none"}}})}})}return X(d)}function X({props:e,attrs:o,slots:a,slot:l,name:n}){var r,i;let{as:d,...c}=Ct(e,["unmount","static"]),u=(r=a.default)==null?void 0:r.call(a,l),f={};if(l){let h=!1,v=[];for(let[y,x]of Object.entries(l))typeof x=="boolean"&&(h=!0),x===!0&&v.push(y);h&&(f["data-headlessui-state"]=v.join(" "))}if(d==="template"){if(u=je(u??[]),Object.keys(c).length>0||Object.keys(o).length>0){let[h,...v]=u??[];if(!St(h)||v.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${n} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(c).concat(Object.keys(o)).map(s=>s.trim()).filter((s,$,k)=>k.indexOf(s)===$).sort((s,$)=>s.localeCompare($)).map(s=>`  - ${s}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(s=>`  - ${s}`).join(`
`)].join(`
`));let y=Ae((i=h.props)!=null?i:{},c,f),x=Ze(h,y,!0);for(let s in y)s.startsWith("on")&&(x.props||(x.props={}),x.props[s]=y[s]);return x}return Array.isArray(u)&&u.length===1?u[0]:u}return et(d,Object.assign({},c,f),{default:()=>u})}function je(e){return e.flatMap(o=>o.type===q?je(o.children):[o])}function Ae(...e){if(e.length===0)return{};if(e.length===1)return e[0];let o={},a={};for(let l of e)for(let n in l)n.startsWith("on")&&typeof l[n]=="function"?(a[n]!=null||(a[n]=[]),a[n].push(l[n])):o[n]=l[n];if(o.disabled||o["aria-disabled"])return Object.assign(o,Object.fromEntries(Object.keys(a).map(l=>[l,void 0])));for(let l in a)Object.assign(o,{[l](n,...r){let i=a[l];for(let d of i){if(n instanceof Event&&n.defaultPrevented)return;d(n,...r)}}});return o}function Ct(e,o=[]){let a=Object.assign({},e);for(let l of o)l in a&&delete a[l];return a}function St(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let Be=Symbol("Context");var G=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(G||{});function Pt(){return J(Be,null)}function It(e){ne(Be,e)}var K=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(K||{}),Dt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Dt||{});let Ue=Symbol("DisclosureContext");function se(e){let o=J(Ue,null);if(o===null){let a=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,se),a}return o}let Oe=Symbol("DisclosurePanelContext");function Vt(){return J(Oe,null)}let jt=I({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(e,{slots:o,attrs:a}){let l=j(e.defaultOpen?0:1),n=j(null),r=j(null),i={buttonId:j(`headlessui-disclosure-button-${he()}`),panelId:j(`headlessui-disclosure-panel-${he()}`),disclosureState:l,panel:n,button:r,toggleDisclosure(){l.value=Y(l.value,{0:1,1:0})},closeDisclosure(){l.value!==1&&(l.value=1)},close(d){i.closeDisclosure();let c=d?d instanceof HTMLElement?d:d.value instanceof HTMLElement?z(d):z(i.button):z(i.button);c==null||c.focus()}};return ne(Ue,i),It(D(()=>Y(l.value,{0:G.Open,1:G.Closed}))),()=>{let{defaultOpen:d,...c}=e,u={open:l.value===0,close:i.close};return le({theirProps:c,ourProps:{},slot:u,slots:o,attrs:a,name:"Disclosure"})}}}),At=I({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:o,slots:a,expose:l}){let n=se("DisclosureButton"),r=Vt(),i=D(()=>r===null?!1:r.value===n.panelId.value);ae(()=>{i.value||e.id!==null&&(n.buttonId.value=e.id)}),$e(()=>{i.value||(n.buttonId.value=null)});let d=j(null);l({el:d,$el:d}),i.value||xe(()=>{n.button.value=d.value});let c=xt(D(()=>({as:e.as,type:o.type})),d);function u(){var v;e.disabled||(i.value?(n.toggleDisclosure(),(v=z(n.button))==null||v.focus()):n.toggleDisclosure())}function f(v){var y;if(!e.disabled)if(i.value)switch(v.key){case K.Space:case K.Enter:v.preventDefault(),v.stopPropagation(),n.toggleDisclosure(),(y=z(n.button))==null||y.focus();break}else switch(v.key){case K.Space:case K.Enter:v.preventDefault(),v.stopPropagation(),n.toggleDisclosure();break}}function h(v){switch(v.key){case K.Space:v.preventDefault();break}}return()=>{var v;let y={open:n.disclosureState.value===0},{id:x,...s}=e,$=i.value?{ref:d,type:c.value,onClick:u,onKeydown:f}:{id:(v=n.buttonId.value)!=null?v:x,ref:d,type:c.value,"aria-expanded":n.disclosureState.value===0,"aria-controls":n.disclosureState.value===0||z(n.panel)?n.panelId.value:void 0,disabled:e.disabled?!0:void 0,onClick:u,onKeydown:f,onKeyup:h};return le({ourProps:$,theirProps:s,slot:y,attrs:o,slots:a,name:"DisclosureButton"})}}}),Bt=I({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:o,slots:a,expose:l}){let n=se("DisclosurePanel");ae(()=>{e.id!==null&&(n.panelId.value=e.id)}),$e(()=>{n.panelId.value=null}),l({el:n.panel,$el:n.panel}),ne(Oe,n.panelId);let r=Pt(),i=D(()=>r!==null?(r.value&G.Open)===G.Open:n.disclosureState.value===0);return()=>{var d;let c={open:n.disclosureState.value===0,close:n.close},{id:u,...f}=e,h={id:(d=n.panelId.value)!=null?d:u,ref:n.panel};return le({ourProps:h,theirProps:f,slot:c,attrs:o,slots:a,features:Z.RenderStrategy|Z.Static,visible:i.value,name:"DisclosurePanel"})}}});const Ut={class:"mr-auto flex select-none items-center font-medium"},Ot={key:0,class:"flex flex-row items-center"},me="plansGroup",Ee=I({__name:"Contents",props:{planUuid:{},showArchived:{type:Boolean},columns:{}},setup(e){const{isMoving:o}=De(),{calculateMovedItemPriority:a,plans:l}=F(),{totalChildren:n,finishedChildren:r,unfinishedChildren:i,redFlag:d,completePlan:c,placeholder:u}=Pe(),f=e,h=D(()=>l.data.value.filter(s=>s.parent===f.planUuid).filter(s=>f.showArchived||!s.archived).toSorted((s,$)=>s.archived!==$.archived?s.archived?1:-1:(s.priority??0)-($.priority??0)));function v(s){if(s.destination){if(s.destination.identifier==="Archive"){if(s.payload.archived){l.remove(s.payload.uuid);return}l.update(s.payload.uuid,{archived:!0});return}if(s.destination.group===me){const $=s.destination.index??0;if($===s.origin.index&&s.destination.identifier===s.origin.identifier)return;const k=a(s.destination.listItems,$);s.payload.priority=k,l.update(s.payload.uuid,{priority:k,parent:String(s.destination.identifier)||null}).then(()=>console.log("Item moved successfully",l.data.value.find(B=>B.id===s.payload.id)))}}}const y=j(null),x=s=>{y.value===s?(l.update(s,{archived:!1}),y.value=null):y.value=s};return(s,$)=>{const k=H,B=oe,g=ot,U=Ce,L=lt,O=Ve,A=st,M=Ee;return m(),w(t(rt),{list:t(h),"list-key":"uuid",options:{hoverClass:"cursor-grabbing drop-shadow-[0_10px_10px_rgba(0,0,0,1)] scale-105 select-none",hoveredOverListClass:"bg-blue-100 dark:bg-blue-800 rounded",defaultItemClass:"dark:border-black",liftDelay:200,handle:!0},identifier:f.planUuid??"home",group:me,onDropItem:v},{default:_(({item:p})=>[b(t(jt),{ref:"disclosures"},{default:_(({open:N})=>[E("div",{class:C(["flex w-full flex-row items-center",[p.archived?"italic text-slate-400 dark:text-slate-600":"text-slate-700 dark:text-slate-200"]])},[E("div",Ut,[b(k,{name:"i-heroicons-ellipsis-vertical",class:"cursor-grab","data-handle":""}),b(t(At),{class:"flex cursor-pointer"},{default:_(()=>[b(k,{name:N?"i-heroicons-chevron-down-16-solid":"i-heroicons-chevron-right-16-solid",class:C(["self-center",{"bg-gray-700":t(n)(p.uuid),"bg-slate-300":t(n)(p.uuid)===0,"bg-slate-400":p.archived}])},null,8,["name","class"])]),_:2},1024),p.archived?(m(),w(B,{key:0,text:"Click 2x to restore from archive"},{default:_(()=>[b(k,{name:t(y)===p.uuid?"i-heroicons-archive-box-x-mark":"i-heroicons-archive-box",class:C(["mr-1 hover:bg-purple-500",t(y)===p.uuid?"bg-purple-500":""]),onClick:V=>x(p.uuid)},null,8,["name","class","onClick"])]),_:2},1024)):S("",!0),b(U,{to:{name:"projects-id",params:{id:p.id}}},{default:_(()=>[E("span",{class:C([[t(n)(p.uuid)?"font-bold":"font-normal",p.done?"line-through":""],"mr-1"])},[b(g,{plan:p},null,8,["plan"]),T(" "+R(p.title),1)],2)]),_:2},1032,["to"])]),t(o)(p)?S("",!0):(m(),P("div",Ot,[b(L,{style:W({width:`${s.columns[0].width-8}px`}),class:C(["mb-1 border-b px-1 mx-1 text-right text-sm outline-none",{"border-b-4 border-double border-gray-500 dark:border-gray-300":N&&t(n)(p.uuid),"border-solid border-gray-300 dark:border-gray-700":!N,"border-b-red-500 text-red-500":t(d)(p,"budget")}]),field:"budget","input-type":"number",plan:p,placeholder:t(u)(p,"budget")},null,8,["style","class","plan","placeholder"]),b(L,{style:W({width:`${s.columns[1].width-8}px`}),class:C(["mb-1 border-b px-1 mx-1 text-right text-sm outline-none",{"border-b-4 border-double border-gray-500 dark:border-gray-300":N&&t(n)(p.uuid),"border-solid border-gray-300 dark:border-gray-700":!N,"border-b-red-500 text-red-500":t(d)(p,"manhours_required")}]),field:"manhours_required","input-type":"number",plan:p,placeholder:t(u)(p,"manhours_required")},null,8,["style","class","plan","placeholder"]),E("div",{class:"flex justify-center self-center",style:W({width:`${s.columns[2].width}px`})},[t(n)(p.uuid)?(m(),w(O,{key:0,modelValue:p.done,"onUpdate:modelValue":V=>p.done=V,"checked-icon":t(i)(p.uuid)?"i-heroicons-hand-raised-solid":"i-heroicons-check-20-solid","unchecked-icon":!t(i)(p.uuid)&&t(r)(p.uuid)?"i-heroicons-check-20-solid":"",color:t(i)(p.uuid)&&p.done&&!p.archived?"error":!p.archived&&p.done?"primary":"neutral",onClick:V=>t(c)(p)},null,8,["modelValue","onUpdate:modelValue","checked-icon","unchecked-icon","color","onClick"])):(m(),w(A,{key:1,modelValue:p.done,"onUpdate:modelValue":V=>p.done=V,onClick:V=>t(c)(p)},null,8,["modelValue","onUpdate:modelValue","onClick"]))],4)]))],2),b(t(Bt),{class:"w-full"},{default:_(()=>[b(M,{"plan-uuid":p.uuid,class:"ml-6 min-h-3 rounded-l border-y border-l border-gray-400 pl-1 dark:border-gray-300","show-archived":s.showArchived,columns:s.columns},null,8,["plan-uuid","show-archived","columns"])]),_:2},1024)]),_:2},1536)]),_:1},8,["list","identifier"])}}}),Et=I({__name:"index",props:{showArchived:{type:Boolean}},setup(e){const{pagePlan:o}=F(),{totalChildren:a}=Pe(),l=[{width:64,title:"Budget"},{width:64,title:"Hours"},{width:48,title:"Done?"}];return(n,r)=>{var c,u;const i=bt,d=Ee;return t(a)(((c=t(o))==null?void 0:c.uuid)||null)?(m(),P(q,{key:0},[b(i,{columns:l}),b(d,{"plan-uuid":((u=t(o))==null?void 0:u.uuid)||null,"show-archived":n.showArchived,columns:l},null,8,["plan-uuid","show-archived"])],64)):S("",!0)}}}),Tt={class:"flex flex-col items-center"},zt={key:0,class:"flex items-center text-sm"},Lt={key:1,class:"flex items-center text-sm text-red-500"},Nt={class:"flex items-center"},Rt=I({__name:"Panel",props:{showArchived:{type:Boolean}},emits:["toggleShowArchived"],setup(e){const{movingItem:o}=De(),a=te("plans",{verbose:!0,autoFetch:!0}),l=Se(),{archiveDoneChildren:n}=F(),r=D(()=>isNaN(parseInt(l.params.id))?null:parseInt(l.params.id)),i=D(()=>a.data.value.filter(c=>c.parent_id===r.value&&c.archived).length),d=D(()=>a.data.value.some(c=>c.parent_id===r.value&&c.done&&!c.archived));return(c,u)=>{const f=H,h=Ve,v=oe,y=ke,x=Ie;return m(),w(t(it),{identifier:"Archive",group:"plansGroup"},{default:_(({isHovering:s})=>{var $,k;return[b(x,{class:C(["m-2 flex w-auto flex-col items-center rounded-lg bg-sky-50 transition-all hover:bg-sky-100",{"border-red-500":($=t(o))==null?void 0:$.payload.archived,"border-gray-300":!((k=t(o))!=null&&k.payload.archived)}]),onClick:B=>!s&&c.$emit("toggleShowArchived",!c.showArchived)},{default:_(()=>{var B,g,U,L;return[E("div",Tt,[E("span",{class:C(["m-1 flex select-none transition-all",{"text-red-500":s&&((B=t(o))==null?void 0:B.payload.archived)}]),size:"xs"},R((g=t(o))!=null&&g.payload.archived?"Drop here to DELETE forever":t(o)?"Drop here to archive":`Archive: ${t(i)||"empty"}`),3),(U=t(o))!=null&&U.payload.archived&&t(a).data.value.some(O=>{var A;return O.parent_id===((A=t(o))==null?void 0:A.payload.id)})?(m(),P("span",zt,[b(f,{name:"i-heroicons-information-circle"}),u[0]||(u[0]=T(" This item can not be deleted, because it has dependencies "))])):(L=t(o))!=null&&L.payload.archived?(m(),P("span",Lt,[b(f,{name:"i-heroicons-exclamation-triangle"}),u[1]||(u[1]=T(" This action is irreversible "))])):S("",!0),b(v,{prevent:s,text:"Toggle to show archived items"},{default:_(()=>{var O,A,M;return[E("div",Nt,[b(f,{class:C(["transition-all",{"size-16":s,"size-12":!s,"text-red-500":s&&((O=t(o))==null?void 0:O.payload.archived),"text-gray-400":!s||!((A=t(o))!=null&&A.payload.archived)}]),name:(M=t(o))!=null&&M.payload.archived?"i-heroicons-trash":s?"i-heroicons-archive-box-arrow-down":"i-heroicons-archive-box"},null,8,["class","name"]),t(o)?S("",!0):(m(),w(h,{key:0,"model-value":c.showArchived,"checked-icon":"i-heroicons-eye","unchecked-icon":"i-heroicons-eye-slash",class:"m-1"},null,8,["model-value"]))])]}),_:2},1032,["prevent"]),t(d)?(m(),w(y,{key:2,class:"ml-auto hover:text-red-500 hover:ring-red-400",variant:"solid",size:"xs",onClick:t(n)},{default:_(()=>u[2]||(u[2]=[T(" Archive all done tasks/projects ")])),_:1},8,["onClick"])):S("",!0)])]}),_:2},1032,["class","onClick"])]}),_:1})}}}),Mt={key:0,class:"flex items-center gap-2"},qt=I({__name:"BreadCrumbs",props:{plan:{}},setup(e){const o=e,{getTrail:a}=ut(),{pagePlan:l,planMap:n}=F(),r=D(()=>a(o.plan||null));return(i,d)=>{var f,h;const c=H,u=Ce;return t(l)?(m(),P("div",Mt,[b(u,{to:{name:"projects-id",params:{id:null}},class:"flex items-center text-2xl"},{default:_(()=>[b(c,{name:"i-heroicons-home"})]),_:1}),t(r).length>3?(m(),P(q,{key:0},[b(c,{name:"i-heroicons-arrow-right-16-solid"}),d[0]||(d[0]=T(" ... "))],64)):S("",!0),t(r).length>0?(m(),w(c,{key:1,name:"i-heroicons-arrow-right-16-solid"})):S("",!0),(m(!0),P(q,null,_e(t(r).slice(-3),(v,y)=>(m(),P(q,{key:y},[b(u,{to:{name:"projects-id",params:{id:v.id}}},{default:_(()=>[T(R(v.title),1)]),_:2},1032,["to"]),y<Math.min(t(r).length-1,2)?(m(),w(c,{key:0,name:"i-heroicons-arrow-right-16-solid"})):S("",!0)],64))),128)),t(r).length>0?(m(),w(u,{key:2,class:"flex items-center",to:{name:"projects-id",params:{id:(h=t(n).get(((f=t(r).at(-1))==null?void 0:f.parent)??""))==null?void 0:h.id}}},{default:_(()=>[b(c,{name:"i-heroicons-arrow-uturn-left-16-solid"})]),_:1},8,["to"])):S("",!0)])):S("",!0)}}}),Ft={class:"flex w-full flex-col items-center"},Yt=I({__name:"[[id]]",setup(e){const{pagePlan:o}=F(),a=Se(),l=j(!1);return(n,r)=>{var v;const i=tt,d=at,c=ft,u=Et,f=Ie,h=Rt;return m(),P("div",Ft,[b(t(qt),{class:"mt-2 w-full self-start text-slate-500",plan:(v=t(o))==null?void 0:v.uuid},null,8,["plan"]),b(f,{class:"w-full overflow-hidden px-6 py-2 my-2"},{default:_(()=>[t(a).params.tab?(m(),w(i,{key:0})):(m(),w(d,{key:1})),b(c),b(u,{"show-archived":t(l)},null,8,["show-archived"])]),_:1}),b(h,{"show-archived":t(l),onToggleShowArchived:r[0]||(r[0]=y=>l.value=y)},null,8,["show-archived"])])}}});export{Yt as default};
